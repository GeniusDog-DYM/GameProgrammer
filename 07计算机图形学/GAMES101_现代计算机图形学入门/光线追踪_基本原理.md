# Ray Tracing 1 基本原理

Why Ray Tracing?

* Rasterization couldn't handle `global` effects well
  * `Soft` shadows
  * And especially when the light bounces `more than once`

![image-20210503112638013](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503112638013.png)

![image-20210503113259614](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503113259614.png)

![image-20210503113414509](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503113414509.png)

# Basic Ray-Tracing Algorithm

## Light Rays

![image-20210503113645164](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503113645164.png)

![image-20210503114008559](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503114008559.png)

## Ray Casting

![image-20210503115129772](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503115129772.png)

![image-20210503115141404](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503115141404.png)

![image-20210503115403744](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503115403744.png)

![image-20210503115519247](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503115519247.png)

![image-20210503120013695](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503120013695.png)





# Ray-Surface Intersection

## Ray Equation

![image-20210503160901879](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503160901879.png)

## Ray Intersection With Sphere

![image-20210503162025853](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503162025853.png)

![image-20210503170423623](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503170423623.png)

![image-20210503170623694](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503170623694.png)

![image-20210503170648391](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503170648391.png)

## Ray Intersection With Triangle

分解成 2 个问题

![image-20210503171113954](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503171113954.png)

![image-20210503191608925](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503191608925.png)

先求光线与平面的交点，再判断是否在三角形内。简化版的思想

![image-20210503192204259](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503192204259.png)

![image-20210503192416553](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503192416553.png)



# Accelerating Ray-Surface Intersection

* Performance Challenges 性能问题

![image-20210503193036542](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503193036542.png)



# Bounding Volumes 包围盒

![image-20210503193347650](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503193347650.png)

![image-20210503193414690](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503193414690.png)

![image-20210503193716293](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503193716293.png)

![image-20210503195452692](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503195452692.png)

![image-20210503195608264](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503195608264.png)

![image-20210503200254023](Media/%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA_%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86/image-20210503200254023.png)

