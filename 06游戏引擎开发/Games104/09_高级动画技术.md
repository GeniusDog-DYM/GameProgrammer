# 动画树，IK 和表情动画



# 动画混合 Animation Blending

线性插值

![image-20220615213159183](Media/09_高级动画技术/image-20220615213159183.png)

![image-20220615213316785](Media/09_高级动画技术/image-20220615213316785.png)

# 混合空间 BlendSpace

![image-20220615213638552](Media/09_高级动画技术/image-20220615213638552.png)

![image-20220615213650957](Media/09_高级动画技术/image-20220615213650957.png)

![image-20220615213729032](Media/09_高级动画技术/image-20220615213729032.png)

三角形，重心插值



## Skeleton Masked Blending

![image-20220615214111611](Media/09_高级动画技术/image-20220615214111611.png)

![image-20220615214138909](Media/09_高级动画技术/image-20220615214138909.png)

## Additive Blending

![image-20220615214231699](Media/09_高级动画技术/image-20220615214231699.png)

避免过度叠加，导致超过极限

![image-20220615214339007](Media/09_高级动画技术/image-20220615214339007.png)

# 动作状态机 Action State Machine (ASM)

![image-20220615214806978](Media/09_高级动画技术/image-20220615214806978.png)

![image-20220615214839635](Media/09_高级动画技术/image-20220615214839635.png)

## 两种过度方式

![image-20220615214935713](Media/09_高级动画技术/image-20220615214935713.png)

![image-20220615215213053](Media/09_高级动画技术/image-20220615215213053.png)

![image-20220615215221973](Media/09_高级动画技术/image-20220615215221973.png)

![image-20220615215249909](Media/09_高级动画技术/image-20220615215249909.png)

# 动画混合树 Animation Blend Tree

![image-20220615215430252](Media/09_高级动画技术/image-20220615215430252.png)

![image-20220615215500762](Media/09_高级动画技术/image-20220615215500762.png)

![image-20220615215508585](Media/09_高级动画技术/image-20220615215508585.png)

![image-20220615215519591](Media/09_高级动画技术/image-20220615215519591.png)

![image-20220615215607807](Media/09_高级动画技术/image-20220615215607807.png)

![image-20220615215627943](Media/09_高级动画技术/image-20220615215627943.png)

![image-20220615215715083](Media/09_高级动画技术/image-20220615215715083.png)

![image-20220615215814599](Media/09_高级动画技术/image-20220615215814599.png)

# IK 技术

![image-20220615215914781](Media/09_高级动画技术/image-20220615215914781.png)

![image-20220615220016131](Media/09_高级动画技术/image-20220615220016131.png)

![image-20220615220028939](Media/09_高级动画技术/image-20220615220028939.png)

![image-20220615220041779](Media/09_高级动画技术/image-20220615220041779.png)

![image-20220615220105780](Media/09_高级动画技术/image-20220615220105780.png)

![image-20220615220121668](Media/09_高级动画技术/image-20220615220121668.png)

## 太远太近都够不着

![image-20220615220220822](Media/09_高级动画技术/image-20220615220220822.png)

![image-20220615220301498](Media/09_高级动画技术/image-20220615220301498.png)

![image-20220615220431302](Media/09_高级动画技术/image-20220615220431302.png)

## CCD

![image-20220615220507789](Media/09_高级动画技术/image-20220615220507789.png)

![image-20220615220520767](Media/09_高级动画技术/image-20220615220520767.png)

### 各种 IK 算法都是 Hack，核心思想是长链的弹簧棒

![image-20220615222340517](Media/09_高级动画技术/image-20220615222340517.png)

## FABRIK

![image-20220615222506423](Media/09_高级动画技术/image-20220615222506423.png)

![image-20220615222542810](Media/09_高级动画技术/image-20220615222542810.png)



## Multiple End-Effectors

![image-20220615222653471](Media/09_高级动画技术/image-20220615222653471.png)

![image-20220615222735570](Media/09_高级动画技术/image-20220615222735570.png)

![image-20220615222747084](Media/09_高级动画技术/image-20220615222747084.png)

梯度下降的思想

![image-20220615222920120](Media/09_高级动画技术/image-20220615222920120.png)

![image-20220615222945194](Media/09_高级动画技术/image-20220615222945194.png)

![image-20220615222956899](Media/09_高级动画技术/image-20220615222956899.png)

## Other IK Solutions

![image-20220615223038538](Media/09_高级动画技术/image-20220615223038538.png)

## IK 还在快速演进，如何检测环境互动，符合物理平衡

![image-20220615223220676](Media/09_高级动画技术/image-20220615223220676.png)

![image-20220615223325848](Media/09_高级动画技术/image-20220615223325848.png)



# 面部表情 Facial Animation

![image-20220615223435905](Media/09_高级动画技术/image-20220615223435905.png)

### 微表情

![image-20220615223516124](Media/09_高级动画技术/image-20220615223516124.png)

![image-20220615223557218](Media/09_高级动画技术/image-20220615223557218.png)

![image-20220615223653625](Media/09_高级动画技术/image-20220615223653625.png)

![image-20220615223707080](Media/09_高级动画技术/image-20220615223707080.png)

![image-20220615223735500](Media/09_高级动画技术/image-20220615223735500.png)

![image-20220615223752497](Media/09_高级动画技术/image-20220615223752497.png)

![image-20220615223827372](Media/09_高级动画技术/image-20220615223827372.png)

![image-20220615223850773](Media/09_高级动画技术/image-20220615223850773.png)

### 为什么不用骨骼动画

骨骼动画也可以做，表现张口闭口没问题，但是嘟嘟嘴这种就不好做。

实际的情况是，两种混用

![image-20220615224006045](Media/09_高级动画技术/image-20220615224006045.png)

韩式网游，捏脸系统本身就是一个游戏，一个团队做 3 年。大量的精细参数调整，大量的 MorphTarget

![image-20220615224157787](Media/09_高级动画技术/image-20220615224157787.png)

![image-20220615224215440](Media/09_高级动画技术/image-20220615224215440.png)

![image-20220615224238662](Media/09_高级动画技术/image-20220615224238662.png)

# 动画重定向 Animation Retargeting

![image-20220615224357521](Media/09_高级动画技术/image-20220615224357521.png)

![image-20220615224417041](Media/09_高级动画技术/image-20220615224417041.png)

![image-20220615224549717](Media/09_高级动画技术/image-20220615224549717.png)

![image-20220615224601465](Media/09_高级动画技术/image-20220615224601465.png)

![image-20220615224618552](Media/09_高级动画技术/image-20220615224618552.png)

![image-20220615224706361](Media/09_高级动画技术/image-20220615224706361.png)

## 不同骨架之间传递

![image-20220615224759426](Media/09_高级动画技术/image-20220615224759426.png)

### NVIDIA

![image-20220615224818438](Media/09_高级动画技术/image-20220615224818438.png)

![image-20220615224856506](Media/09_高级动画技术/image-20220615224856506.png)

![image-20220615224949213](Media/09_高级动画技术/image-20220615224949213.png)



## Morph Animation Retargeting

不同捏脸之间，复用标准脸做的 Morph 表情动画

![image-20220615225115906](Media/09_高级动画技术/image-20220615225115906.png)

![image-20220615225133680](Media/09_高级动画技术/image-20220615225133680.png)

# Take Away

![image-20220615225208304](Media/09_高级动画技术/image-20220615225208304.png)